<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic về Lịch tiếp nhận, giải quyết TTHC tại Công an phường Buôn Hồ</title>
    <!-- Bao gồm CDN của Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Đảm bảo phông chữ Inter được sử dụng */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <!-- Main container for the infographic -->
    <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-8">
        <div class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-4">
                THÔNG BÁO LỊCH TIẾP NHẬN, GIẢI QUYẾT TTHC
            </h1>
            <p class="text-lg md:text-xl lg:text-2xl text-gray-600">
                Tại Công an phường Buôn Hồ
            </p>
            <p class="text-lg md:text-xl text-gray-700 mt-4">
                Nhằm tạo điều kiện thuận lợi và nâng cao hiệu quả phục vụ Nhân dân.
            </p>
        </div>

        <!-- Section: Thời gian làm việc -->
        <div class="bg-blue-100 p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl md:text-3xl font-semibold text-blue-800 mb-4 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-10 md:w-10 inline-block mr-3 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                1. Thời gian làm việc
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg md:text-xl text-blue-700">
                <div>
                    <p><span class="font-bold">Ngày làm việc:</span> Thứ Hai đến thứ Sáu</p>
                    <p class="ml-4">(Riêng cấp đổi, cấp lại GPLX: đến sáng thứ Bảy)</p>
                </div>
                <div>
                    <p><span class="font-bold">Thời gian trong ngày:</span></p>
                    <ul class="list-disc list-inside ml-4">
                        <li>Sáng: 07h30 - 11h00 <span class="text-gray-600">(11h00 - 11h30 xử lý hồ sơ)</span></li>
                        <li>Chiều: 13h30 - 16h00 <span class="text-gray-600">(16h00 - 16h30 xử lý hồ sơ)</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section: Địa điểm liên hệ -->
        <div class="bg-green-100 p-6 rounded-lg shadow-md mb-8 text-center">
            <h2 class="text-2xl md:text-3xl font-semibold text-green-800 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-10 md:w-10 inline-block mr-3 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Địa điểm & Liên hệ
            </h2>
            <p class="text-lg md:text-xl text-green-700">
                Công an phường Buôn Hồ, 04 Trần Hưng Đạo, phường Buôn Hồ, Đắk Lắk.
            </p>
            <p class="text-lg md:text-xl text-green-700 mt-2">
                Số điện thoại liên hệ: <span class="font-bold">0262.387.2299</span>
            </p>
        </div>

        <!-- Section: Lịch ưu tiên tiếp nhận theo từng lĩnh vực -->
        <div class="bg-purple-100 p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl md:text-3xl font-semibold text-purple-800 mb-6 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 md:h-10 md:w-10 inline-block mr-3 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                2. Lịch ưu tiên tiếp nhận theo từng lĩnh vực
            </h2>
            <div class="space-y-6">
                <!-- Item 1: Định danh và xác thực điện tử -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-purple-200">
                    <p class="text-xl font-bold text-purple-700 mb-2">
                        <span class="text-purple-500 mr-2">1.</span> Định danh và xác thực điện tử
                    </p>
                    <ul class="list-disc list-inside ml-6 text-base md:text-lg text-gray-800 space-y-1">
                        <li><span class="font-semibold">Thời gian ưu tiên:</span> Sáng thứ Hai</li>
                
                    </ul>
                </div>
                <!-- Item 2: Cấp, quản lý căn cước -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-purple-200">
                    <p class="text-xl font-bold text-purple-700 mb-2">
                        <span class="text-purple-500 mr-2">2.</span> Cấp, quản lý căn cước
                    </p>
                    <ul class="list-disc list-inside ml-6 text-base md:text-lg text-gray-800 space-y-1">
                        <li><span class="font-semibold">Thời gian ưu tiên:</span> Chiều thứ Hai, cả ngày thứ Ba và thứ Tư</li>
                    </ul>
                </div>
                <!-- Item 3: Cư trú -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-purple-200">
                    <p class="text-xl font-bold text-purple-700 mb-2">
                        <span class="text-purple-500 mr-2">3.</span> Cư trú
                    </p>
                    <ul class="list-disc list-inside ml-6 text-base md:text-lg text-gray-800 space-y-1">
                        <li><span class="font-semibold">Thời gian ưu tiên:</span> thứ Hai, thứ Ba, thứ Tư</li>
                    </ul>
                </div>
                <!-- Item 4: Đăng ký, quản lý phương tiện giao thông -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-purple-200">
                    <p class="text-xl font-bold text-purple-700 mb-2">
                        <span class="text-purple-500 mr-2">4.</span> Đăng ký, quản lý phương tiện giao thông
                    </p>
                    <ul class="list-disc list-inside ml-6 text-base md:text-lg text-gray-800 space-y-1">
                        <li><span class="font-semibold">Thời gian ưu tiên:</span> thứ Hai đến thứ Sáu</li>
                    </ul>
                </div>
                <!-- Item 5: Cấp đổi, cấp lại giấy phép lái xe (GPLX) -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-purple-200">
                    <p class="text-xl font-bold text-purple-700 mb-2">
                        <span class="text-purple-500 mr-2">5.</span> Cấp đổi, cấp lại giấy phép lái xe (GPLX)
                    </p>
                    <ul class="list-disc list-inside ml-6 text-base md:text-lg text-gray-800 space-y-1">
                        <li><span class="font-semibold">Thời gian ưu tiên:</span> thứ Hai đến sáng thứ Bảy</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>Công an phường Buôn Hồ trân trọng thông báo và mong bà con Nhân dân phối hợp, sắp xếp thời gian hợp lý để việc tiếp nhận và giải quyết TTHC được diễn ra thuận lợi, nhanh chóng, đúng quy định.</p>
        </div>

        <!-- LLM Feature: Administrative Procedure Lookup Assistant -->
        <div class="mt-10 bg-yellow-50 p-6 rounded-lg shadow-lg border border-yellow-200">
            <h2 class="text-2xl md:text-3xl font-bold text-yellow-800 mb-4 text-center">
                ✨ Trợ lý tra cứu thủ tục hành chính ✨
            </h2>
            <p class="text-lg text-gray-700 mb-4 text-center">
                Nhập câu hỏi của bạn về các thủ tục hành chính để nhận được thông tin hữu ích.
            </p>
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <input type="text" id="procedureQuery" placeholder="Ví dụ: Làm căn cước mất bao lâu?" 
                       class="flex-grow p-2 md:p-3 border border-yellow-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 text-base md:text-lg">
                <button id="lookupButton" 
                        class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 md:py-3 md:px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 text-base md:text-lg">
                    Tra cứu
                </button>
            </div>
            <div id="loadingIndicator" class="text-center text-yellow-700 text-base md:text-lg hidden">
                Đang tải...
            </div>
            <div id="llmResponse" class="mt-4 p-3 md:p-4 bg-yellow-100 rounded-lg border border-yellow-300 text-gray-800 text-lg md:text-xl min-h-[80px] flex items-center justify-center text-center">
                <!-- LLM response will be displayed here -->
                Kết quả tra cứu sẽ hiển thị ở đây.
            </div>
        </div>
    </div>

    <script src="data.js"></script> <!-- Link to the external data.js file -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const lookupButton = document.getElementById('lookupButton');
            const procedureQueryInput = document.getElementById('procedureQuery');
            const llmResponseDiv = document.getElementById('llmResponse');
            const loadingIndicator = document.getElementById('loadingIndicator');

            // infographicContext is now defined in data.js and accessible here
            // because data.js is loaded before this script.

            lookupButton.addEventListener('click', async () => {
                const userQuery = procedureQueryInput.value.trim();
                if (!userQuery) {
                    llmResponseDiv.textContent = 'Vui lòng nhập câu hỏi của bạn.';
                    return;
                }

                loadingIndicator.classList.remove('hidden');
                llmResponseDiv.textContent = ''; // Clear previous response

                try {
                    let chatHistory = [];
                    // infographicContext is available globally from data.js
                    const prompt = `${infographicContext}\n\nCâu hỏi của người dùng: ${userQuery}`;
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                    const payload = { contents: chatHistory };
                    const apiKey = "AIzaSyDVqsm2NLmU32v6B1DRavHTB6wfWe25LnY"; // Canvas will automatically provide it in runtime
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        llmResponseDiv.textContent = text;
                    } else {
                        llmResponseDiv.textContent = 'Không thể lấy được thông tin. Vui lòng thử lại sau.';
                        console.error('Unexpected LLM response structure:', result);
                    }
                } catch (error) {
                    llmResponseDiv.textContent = 'Đã xảy ra lỗi khi tra cứu. Vui lòng kiểm tra kết nối mạng và thử lại.';
                    console.error('Error calling Gemini API:', error);
                } finally {
                    loadingIndicator.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
